# Changelog - Chapter 02 è¡¨è¾¾å¼è®¡ç®—å™¨

## [1.1.0] - 2024 - Unicode æ•°å­¦ç¬¦å·æ”¯æŒ

### æ–°å¢åŠŸèƒ½ âœ¨

#### Unicode æ•°å­¦ç¬¦å·æ”¯æŒ
- âœ… **å¹³æ–¹æ ¹ç¬¦å·** `âˆš`: å¯ä»¥ä½¿ç”¨ `âˆš16` ä»£æ›¿ `sqrt(16)`
- âœ… **åœ†å‘¨ç‡** `Ï€`: ç›´æ¥ä½¿ç”¨ Ï€ å¸¸é‡ï¼ˆâ‰ˆ 3.14159...ï¼‰
- âœ… **ä¹˜æ³•ç¬¦å·** `Ã—`: å¯ä»¥ä½¿ç”¨ `5 Ã— 3` ä»£æ›¿ `5 * 3`
- âœ… **é™¤æ³•ç¬¦å·** `Ã·`: å¯ä»¥ä½¿ç”¨ `10 Ã· 2` ä»£æ›¿ `10 / 2`
- âœ… **å¹³æ–¹ä¸Šæ ‡** `Â²`: å¯ä»¥ä½¿ç”¨ `5Â²` ä»£æ›¿ `5 ^ 2`
- âœ… **ç«‹æ–¹ä¸Šæ ‡** `Â³`: å¯ä»¥ä½¿ç”¨ `3Â³` ä»£æ›¿ `3 ^ 3`

#### è¡¨è¾¾å¼ç¤ºä¾‹
```
âˆš16           â†’ 4
5Â²            â†’ 25
3Â³            â†’ 27
Ï€             â†’ 3.141592653589793
2 Ã— Ï€         â†’ 6.283185307179586
10 Ã· 5        â†’ 2
âˆš(16 + 9)     â†’ 5
Ï€ Ã— 5Â²        â†’ 78.53981633974483
âˆš(3Â² + 4Â²)    â†’ 5
```

### æ”¹è¿› ğŸš€

#### è§£æå™¨å¢å¼º
- æ–°å¢ `Token::PrefixOp` ç±»å‹ç”¨äºå¤„ç†å‰ç¼€è¿ç®—ç¬¦ï¼ˆå¦‚ âˆšï¼‰
- æ–°å¢ `Token::Constant` ç±»å‹ç”¨äºå¤„ç†æ•°å­¦å¸¸é‡ï¼ˆå¦‚ Ï€ï¼‰
- æ”¹è¿›è¯æ³•åˆ†æå™¨ä»¥è¯†åˆ« Unicode å­—ç¬¦
- å‰ç¼€è¿ç®—ç¬¦å¯ä»¥é“¾å¼ä½¿ç”¨ï¼ˆå¦‚ `âˆšâˆš256 = 4`ï¼‰

#### æµ‹è¯•è¦†ç›–
- æ–°å¢ 6 ä¸ª Unicode ç›¸å…³æµ‹è¯•
- æ€»æµ‹è¯•æ•°é‡: 40 â†’ 46 ä¸ª
- æµ‹è¯•é€šè¿‡ç‡: 100%

### æ–‡æ¡£ ğŸ“š

æ–°å¢æ–‡æ¡£æ–‡ä»¶ï¼š
- `EXPRESSION_EVALUATOR.md` - å®Œæ•´çš„è¡¨è¾¾å¼æ±‚å€¼å™¨ä½¿ç”¨æŒ‡å—
- `UNICODE_MATH_SYMBOLS.md` - Unicode æ•°å­¦ç¬¦å·å¿«é€Ÿå‚è€ƒ
- `CHANGELOG.md` - æœ¬æ–‡æ¡£

### æŠ€æœ¯ç»†èŠ‚ ğŸ”§

#### è¯æ³•åˆ†æå±‚é¢çš„è½¬æ¢
```rust
// Unicode ç¬¦å·åœ¨è¯æ³•åˆ†æé˜¶æ®µè¢«è½¬æ¢ä¸ºæ ‡å‡† token
"âˆš16"  â†’ [PrefixOp("sqrt"), Number(16.0)]
"5Â²"   â†’ [Number(5.0), Operator('^'), Number(2.0)]
"Ï€"    â†’ [Constant("pi")]
"Ã—"    â†’ Operator('*')
"Ã·"    â†’ Operator('/')
```

#### æ”¯æŒçš„å¸¸é‡å€¼
- `Ï€` (pi) = `std::f64::consts::PI` â‰ˆ 3.141592653589793

---

## [1.0.0] - 2024 - å®Œæ•´è¡¨è¾¾å¼æ±‚å€¼å™¨å®ç°

### æ–°å¢åŠŸèƒ½ âœ¨

#### å®Œæ•´çš„è¡¨è¾¾å¼æ±‚å€¼ç³»ç»Ÿ
- âœ… è¯æ³•åˆ†æå™¨ï¼ˆTokenizerï¼‰- å°†å­—ç¬¦ä¸²è½¬æ¢ä¸º token æµ
- âœ… è¯­æ³•åˆ†æå™¨ï¼ˆParserï¼‰- é€’å½’ä¸‹é™è§£æå™¨ï¼Œæ„å»º AST
- âœ… æ±‚å€¼å™¨ï¼ˆEvaluatorï¼‰- éå† AST å¹¶è®¡ç®—ç»“æœ

#### æ”¯æŒçš„è¿ç®—ç¬¦
- **åŸºæœ¬è¿ç®—**: `+`, `-`, `*`, `/`
- **å¹‚è¿ç®—**: `^` (å³ç»“åˆ)
- **ä¸€å…ƒè¿ç®—ç¬¦**: `+`, `-`
- **æ‹¬å·**: `()` ç”¨äºæ”¹å˜ä¼˜å…ˆçº§

#### æ”¯æŒçš„å‡½æ•°
- **ä¸‰è§’å‡½æ•°**: `sin(x)`, `cos(x)`, `tan(x)`
- **å¹³æ–¹æ ¹**: `sqrt(x)`
- **å¯¹æ•°**: `ln(x)`, `log(value, base)`
- **ç»å¯¹å€¼**: `abs(x)`
- **å–æ•´**: `ceil(x)`, `floor(x)`, `round(x)`

#### è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼ˆä»é«˜åˆ°ä½ï¼‰
1. æ‹¬å· `()`
2. å‡½æ•°è°ƒç”¨ `func()`
3. ä¸€å…ƒè¿ç®—ç¬¦ `+`, `-`
4. å¹‚è¿ç®— `^` (å³ç»“åˆ)
5. ä¹˜é™¤ `*`, `/`
6. åŠ å‡ `+`, `-`

#### é”™è¯¯å¤„ç†
å®Œå–„çš„é”™è¯¯ç±»å‹ï¼š
- `DivisionByZero` - é™¤ä»¥é›¶
- `NegativeSquareRoot` - å¯¹è´Ÿæ•°å¼€å¹³æ–¹æ ¹
- `InvalidLogarithm` - æ— æ•ˆçš„å¯¹æ•°å‚æ•°
- `ParseError` - è§£æé”™è¯¯
- `InvalidCharacter` - æ— æ•ˆå­—ç¬¦
- `InvalidOperator` - æ— æ•ˆè¿ç®—ç¬¦
- `UndefinedFunction` - æœªå®šä¹‰çš„å‡½æ•°
- `InvalidArgumentCount` - å‡½æ•°å‚æ•°æ•°é‡é”™è¯¯

### API å˜æ›´ ğŸ”„

#### Calculator::evaluate_expression
**ä¹‹å‰**:
```rust
pub fn evaluate_expression(&self, _expression: &str) -> Result<f64, Error> {
    Err(Error::ParseError("è¡¨è¾¾å¼æ±‚å€¼åŠŸèƒ½æš‚æœªå®ç°".to_string()))
}
```

**ç°åœ¨**:
```rust
pub fn evaluate_expression(&self, expression: &str) -> Result<f64, Error> {
    let parser = parser::ExpressionParser::new();
    let tokens = parser.tokenize(expression)?;
    let ast = parser.parse(tokens)?;
    let evaluator = evaluator::ExpressionEvaluator::new();
    evaluator.evaluate(&ast)
}
```

### ç¤ºä¾‹ç¨‹åº ğŸ“

æ–°å¢äº¤äº’å¼è®¡ç®—å™¨ç¤ºä¾‹ï¼š
```bash
cargo run -p chapter02 --example expression_calculator
```

æ”¯æŒçš„è¡¨è¾¾å¼ç¤ºä¾‹ï¼š
- ç®€å•è¿ç®—: `2 + 3`, `10 - 4 * 2`
- æ‹¬å·: `(2 + 3) * 4`
- å¹‚è¿ç®—: `2 ^ 3`, `2 ^ 3 ^ 2`
- å‡½æ•°: `sqrt(16)`, `sin(0)`, `abs(-42)`
- å¤æ‚è¡¨è¾¾å¼: `2 + sqrt(16) * 3`, `(2 + 3) * (4 + 5)`

### æµ‹è¯• âœ…

- æ€»æµ‹è¯•æ•°é‡: 40 ä¸ª
- æµ‹è¯•é€šè¿‡ç‡: 100%
- æµ‹è¯•è¦†ç›–:
  - âœ… è¯æ³•åˆ†ææµ‹è¯• (tokenization)
  - âœ… è¯­æ³•åˆ†ææµ‹è¯• (parsing)
  - âœ… æ±‚å€¼æµ‹è¯• (evaluation)
  - âœ… è¿ç®—ç¬¦ä¼˜å…ˆçº§æµ‹è¯•
  - âœ… å‡½æ•°è°ƒç”¨æµ‹è¯•
  - âœ… é”™è¯¯å¤„ç†æµ‹è¯•

### æ¶æ„è®¾è®¡ ğŸ—ï¸

é‡‡ç”¨ç»å…¸çš„ä¸‰é˜¶æ®µç¼–è¯‘å™¨æ¶æ„ï¼š

```
è¾“å…¥å­—ç¬¦ä¸² "2 + 3 * 4"
    â†“
è¯æ³•åˆ†æ (Tokenization)
    â†“
[Number(2), Operator('+'), Number(3), Operator('*'), Number(4)]
    â†“
è¯­æ³•åˆ†æ (Parsing)
    â†“
BinaryOp {
    op: '+',
    left: Number(2),
    right: BinaryOp {
        op: '*',
        left: Number(3),
        right: Number(4)
    }
}
    â†“
æ±‚å€¼ (Evaluation)
    â†“
14.0
```

### æ€§èƒ½ âš¡

- æ—¶é—´å¤æ‚åº¦: O(n)ï¼Œå…¶ä¸­ n æ˜¯è¾“å…¥è¡¨è¾¾å¼çš„é•¿åº¦
- ç©ºé—´å¤æ‚åº¦: O(n)ï¼Œç”¨äºå­˜å‚¨ token å’Œ AST
- é€‚ç”¨äºç»å¤§å¤šæ•°å®é™…åº”ç”¨åœºæ™¯

### é¡¹ç›®ç»“æ„å˜æ›´ ğŸ“

è½¬æ¢ä¸ºæ··åˆé¡¹ç›®ï¼ˆlibrary + binaryï¼‰ï¼š

**Cargo.toml**:
```toml
[lib]
name = "chapter02"
path = "src/lib.rs"

[[bin]]
name = "chapter02"
path = "src/main.rs"
```

**src/lib.rs** (æ–°å¢):
```rust
pub mod calculator;
pub mod data;
pub mod history;
pub mod utils;

pub use calculator::Calculator;
pub use utils::Error;
```

è¿™ä½¿å¾—ç¤ºä¾‹ç¨‹åºå¯ä»¥å¼•ç”¨ chapter02 åº“ï¼š
```rust
use chapter02::Calculator;
```

### æœªæ¥è®¡åˆ’ ğŸ¯

- [ ] å˜é‡æ”¯æŒ: `x = 5; x + 3`
- [ ] æ›´å¤šå¸¸é‡: `e`, `Ï†` (é»„é‡‘æ¯”ä¾‹)
- [ ] æ›´å¤šå‡½æ•°: åä¸‰è§’å‡½æ•°ã€åŒæ›²å‡½æ•°
- [ ] å¤šå‚æ•°å‡½æ•°: æ”¯æŒé€—å·åˆ†éš”
- [ ] è‡ªå®šä¹‰å‡½æ•°å®šä¹‰
- [ ] å•ä½è½¬æ¢: `5m + 3cm`
- [ ] å¤æ•°è¿ç®—
- [ ] æ›´å¤š Unicode ç¬¦å·: `âˆ‘`, `âˆ`, `âˆ«`

---

## å‡çº§æŒ‡å—

### ä»å ä½å®ç°å‡çº§

å¦‚æœä½ ä¹‹å‰ä½¿ç”¨äº†å ä½å®ç°ï¼Œç°åœ¨å¯ä»¥ç›´æ¥è°ƒç”¨ `evaluate_expression`:

```rust
// ä¹‹å‰ï¼ˆä¼šè¿”å›é”™è¯¯ï¼‰
let result = calc.evaluate_expression("2 + 3");
// Error: ParseError("è¡¨è¾¾å¼æ±‚å€¼åŠŸèƒ½æš‚æœªå®ç°")

// ç°åœ¨ï¼ˆæ­£å¸¸å·¥ä½œï¼‰
let result = calc.evaluate_expression("2 + 3")?;
// Ok(5.0)
```

### ä½¿ç”¨ Unicode ç¬¦å·

```rust
// ASCII æ–¹å¼ï¼ˆä»ç„¶æ”¯æŒï¼‰
calc.evaluate_expression("sqrt(16) * 3")?;

// Unicode æ–¹å¼ï¼ˆæ›´ç®€æ´ï¼‰
calc.evaluate_expression("âˆš16 Ã— 3")?;

// ä¸¤è€…å®Œå…¨ç­‰ä»·
```

---

## è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„åŠªåŠ›ï¼

## è®¸å¯è¯

MIT License
